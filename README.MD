# Clean Track RIWI - Sistema de GestiÃ³n de Limpieza

Clean Track RIWI es una aplicaciÃ³n web completa diseÃ±ada para la gestiÃ³n y monitoreo eficiente de tareas de limpieza en instalaciones. La plataforma cuenta con dos roles principales: Administradores, que gestionan zonas, usuarios y asignaciones; y Empleados, que registran sus actividades de limpieza a travÃ©s de un sistema de validaciÃ³n por QR.

El sistema proporciona un monitor en tiempo real del estado de las zonas, un sistema de reportes de productividad y un historial completo de todas las actividades, garantizando un control total sobre la operaciÃ³n.



## âœ¨ CaracterÃ­sticas Principales

El sistema estÃ¡ diseÃ±ado con dos roles principales, cada uno con un conjunto de herramientas especÃ­ficas para maximizar la eficiencia y el control.

### Para Administradores:

*   **Dashboard Interactivo:** VisualizaciÃ³n de estadÃ­sticas clave en tiempo real, incluyendo limpiezas del dÃ­a, zonas pendientes y colaboradores activos.
*   **GestiÃ³n de Zonas (CRUD):** Permite crear, editar y eliminar zonas de limpieza, asignando a cada una un identificador QR Ãºnico y una foto de referencia para fÃ¡cil identificaciÃ³n.
*   **GestiÃ³n de Usuarios (CRUD):** Administra usuarios con roles de "Admin" o "Empleado". Puedes crear, editar, eliminar y gestionar su estado (Activo/Inactivo).
*   **GestiÃ³n de Asignaciones:** Asigna zonas a empleados de forma manual o utiliza una funciÃ³n de **asignaciÃ³n aleatoria** para distribuir las tareas equitativamente.
*   **Monitor de Zonas en Tiempo Real:** Un mapa interactivo que muestra el estado de cada zona (Verde: Limpio, Rojo: Pendiente) con un lÃ­mite de tiempo configurable (por defecto 6 horas) para el reinicio del estado.
*   **Generador de Reportes:** Un potente sistema de filtrado por fechas y tipo de reporte que permite analizar la productividad por empleado o consultar el historial general de limpieza.
*   **Generador de CÃ³digos QR:** Genera e imprime los cÃ³digos QR Ãºnicos para cada zona, listos para ser colocados fÃ­sicamente en el lugar.

### Para Empleados:

*   **Dashboard Personalizado:** Una vista clara y concisa de las zonas asignadas para la jornada laboral, mostrando el estado actual de cada una.
*   **Registro de Limpieza Seguro:** Un sistema de validaciÃ³n mediante escaneo de QR que garantiza que el empleado se encuentre fÃ­sicamente en la zona correcta antes de registrar una limpieza.
*   **Subida de Evidencias:** Permite capturar y subir una fotografÃ­a como prueba irrefutable del trabajo realizado. Las imÃ¡genes se almacenan de forma segura en la nube.
*   **Perfil de Usuario:** Acceso a la informaciÃ³n personal y de trabajo registrada en el sistema.

## ğŸ› ï¸ TecnologÃ­as Utilizadas

La aplicaciÃ³n utiliza un conjunto de tecnologÃ­as modernas y eficientes, seleccionadas para construir una soluciÃ³n robusta, escalable y segura.

| Capa | TecnologÃ­a | PropÃ³sito en el Proyecto |
| :--- | :--- | :--- |
| **Frontend** | **HTML5, CSS3 y JavaScript (ES6+)** | Pilares del desarrollo web para la estructura, diseÃ±o y lÃ³gica interactiva del cliente. |
| | **Bootstrap 5** | Acelera el desarrollo de la interfaz de usuario con un diseÃ±o responsivo y mobile-first. |
| | **SweetAlert2** | Proporciona notificaciones y alertas modales atractivas y personalizadas para el usuario. |
| | **Chart.js** | Visualiza mÃ©tricas clave del sistema mediante grÃ¡ficos interactivos en el dashboard de administrador. |
| | **QRCode.js** | Permite la generaciÃ³n dinÃ¡mica de cÃ³digos QR para cada zona de limpieza. |
| **Backend** | **Node.js con Express.js** | Entorno de ejecuciÃ³n y framework para construir una API RESTful de alto rendimiento. |
| | **JWT (JSON Web Tokens)** | Gestiona la autenticaciÃ³n segura y sin estado para proteger las rutas de la API. |
| | **bcrypt** | Hashea de forma segura las contraseÃ±as de los usuarios para garantizar que nunca se almacenen en texto plano. |
| | **Multer y Multer-S3** | Se utilizan en conjunto para procesar la subida de archivos y almacenarlos directamente en el servicio de nube de AWS S3. |
| | **Nodemailer** | Se encarga del envÃ­o de correos electrÃ³nicos transaccionales, como los de recuperaciÃ³n de contraseÃ±a. |
| **Base de Datos y<br>Almacenamiento** | **PostgreSQL** | Es el sistema de gestiÃ³n de base de datos relacional para el almacenamiento estructurado y persistente de toda la informaciÃ³n. |
| | **AWS S3** | Servicio de almacenamiento de objetos en la nube, optimizado para guardar las fotos de evidencia y de zonas, manteniendo el servidor ligero y escalable. |

---

## ğŸ“‚ Estructura del Proyecto
AquÃ­ tienes una visiÃ³n general de la estructura de carpetas y archivos para entender cÃ³mo se organiza el proyecto.
```
â”œâ”€â”€ back-end/
â”‚   â”œâ”€â”€ node_modules/                 # Dependencias del backend (Node.js)
â”‚   â”œâ”€â”€ .env                          # Variables de entorno para la configuraciÃ³n
â”‚   â”œâ”€â”€ app.js                        # LÃ³gica principal del servidor Express
â”‚   â”œâ”€â”€ db.js                         # ConfiguraciÃ³n y conexiÃ³n a PostgreSQL
â”‚   â”œâ”€â”€ package-lock.json             # Bloqueo de las versiones de dependencias
â”‚   â””â”€â”€ package.json                  # Lista de dependencias del backend
â”œâ”€â”€ data/
â”‚   â””â”€â”€ db.sql                        # Archivo SQL con el esquema de la base de datos
â”œâ”€â”€ docs/                             # DocumentaciÃ³n del proyecto
â”‚   â””â”€â”€ MER/                          # Modelo Entidad-RelaciÃ³n
â”‚       â””â”€â”€ (ImÃ¡genes)                # ImÃ¡genes del diagrama MER
â”œâ”€â”€ front-end/
â”‚   â”œâ”€â”€ css/                          # Hojas de estilo CSS
â”‚   â”‚   â”œâ”€â”€ dashboard_admin.css
â”‚   â”‚   â”œâ”€â”€ styles.css
â”‚   â”‚   â””â”€â”€ zonas_employee.css
â”‚   â”œâ”€â”€ html/                         # PÃ¡ginas HTML del sitio
â”‚   â”‚   â”œâ”€â”€ change_password.html      # PÃ¡gina para cambiar la contraseÃ±a
â”‚   â”‚   â”œâ”€â”€ dashboard_admin.html      # Panel principal del administrador
â”‚   â”‚   â”œâ”€â”€ index.html                # PÃ¡gina de inicio (login)
â”‚   â”‚   â””â”€â”€ zones_employee.html       # Panel del empleado
â”‚   â”œâ”€â”€ img/                          # ImÃ¡genes y activos del frontend
â”‚   â””â”€â”€ js/                           # Archivos JavaScript
â”‚       â”œâ”€â”€ api.js                    # LÃ³gica para las llamadas a la API
â”‚       â”œâ”€â”€ auth-controller.js        # LÃ³gica para la autenticaciÃ³n
â”‚       â”œâ”€â”€ main.js                   # LÃ³gica del dashboard del administrador
â”‚       â”œâ”€â”€ reset-password.js         # LÃ³gica para restablecer la contraseÃ±a
â”‚       â”œâ”€â”€ service-worker.js         # Service Worker para la funcionalidad offline
â”‚       â””â”€â”€ zones_employee.js         # LÃ³gica del portal del empleado
â”œâ”€â”€ .gitignore                        # Archivo para ignorar directorios y archivos de Git
â”œâ”€â”€ README.md                         # DescripciÃ³n del proyecto
â”œâ”€â”€ manifest.json                     # Manifiesto de la aplicaciÃ³n web (PWA)
â””â”€â”€ package.json                      # Lista de dependencias del proyecto (root)
```

## ğŸš€ GuÃ­a de InstalaciÃ³n y Puesta en Marcha

Sigue estos pasos para clonar, configurar y ejecutar el proyecto en tu entorno local.

### 1. Prerrequisitos

AsegÃºrate de tener instalado el siguiente software en tu mÃ¡quina:

*   **Node.js** (versiÃ³n 18.x o superior)
*   **npm** (generalmente se instala con Node.js)
*   Un cliente de **PostgreSQL** como DBeaver o pgAdmin.
*   **Git** para clonar el repositorio.
*   Una cuenta de **AWS** para crear un bucket S3.
*   Una cuenta de **Gmail** con la "VerificaciÃ³n en 2 pasos" activada para generar una contraseÃ±a de aplicaciÃ³n.

### 2. Descarga del Proyecto

Clona el repositorio desde GitHub a tu mÃ¡quina local:

```bash
git clone https://github.com/alejo11102001/CLEAN_TRACK_RIWI
cd CLEAN_TRACK_RIWI
```

### 3. ConfiguraciÃ³n del Backend

Navega a la carpeta del backend:

```bash
cd back-end
```

Instala todas las dependencias del proyecto:

```bash
npm install
npm i
```

Crea un archivo `.env` en la raÃ­z de la carpeta `back-end` y aÃ±ade las siguientes variables. Este archivo es crucial para guardar tus claves secretas.

```env
### ConfiguraciÃ³n de la Base de Datos PostgreSQL
PGHOST=168.119.183.3
PGPORT=5432
PGDATABASE=clean_track_riwi
PGUSER=root
PGPASSWORD=s7cq453mt2jnicTaQXKT

```

### 4. ConfiguraciÃ³n de la Base de Datos

1.  Abre tu cliente de PostgreSQL (DBeaver/pgAdmin).
2.  Crea una nueva base de datos con el nombre que especificaste en tu archivo `.env` (ej: `clean_track_riwi`).
3.  Ejecuta el script SQL `db.sql` para crear todas las tablas, tipos y relaciones necesarias.

### 5. Iniciar la AplicaciÃ³n

Debes iniciar tanto el servidor del backend como el del frontend.

### Iniciar el Backend:

Abre una terminal en la carpeta `back-end` y ejecuta:

```bash
node app.js
```

Si todo estÃ¡ bien, verÃ¡s el mensaje: `Servidor corriendo en http://localhost:3000`.

### Iniciar el Frontend:

1.  Abre la carpeta `front-end` en Visual Studio Code.
2.  AsegÃºrate de tener la extensiÃ³n **"Live Server"** instalada.
3.  Haz clic derecho en tu archivo `index.html`y selecciona **"Open with Live Server"**.
4.  Esto abrirÃ¡ tu aplicaciÃ³n en el navegador, generalmente en `http://127.0.0.1:5500`.

---
## ğŸ§‘â€ğŸ’» Credenciales de Ejemplo

Puedes usar las siguientes credenciales para iniciar sesiÃ³n en la aplicaciÃ³n.

### Administrador
*   **Usuario:** `diego.zuluagaye@amigo.edu.co`
*   **ContraseÃ±a:** `Diego12345@`

### Empleado
*   **Usuario:** `jerorrpo@gmail.com`
*   **ContraseÃ±a:** `jero12345`

---

# â˜ï¸ Despliegue

La aplicaciÃ³n estÃ¡ diseÃ±ada para ser desplegada en servicios modernos con capas gratuitas.

*   **Base de Datos (PostgreSQL):** Se recomienda [Neon](https://neon.tech/).
*   **Backend (Node.js API):** Se recomienda [Render](https://render.com/). No olvides configurar todas las variables de entorno en el panel de Render.
*   **Frontend (Sitio EstÃ¡tico):** Se recomienda [Netlify](https://www.netlify.com/) o [Vercel](https://vercel.com/).

## Pasos post-despliegue:

1.  Actualiza la variable `API_BASE_URL` en tu archivo `front-end/js/api.js` para que apunte a la URL de tu backend en Render.
2.  Actualiza la variable `resetLink` en tu `app.js` para que apunte a la URL de tu frontend en Netlify.
3.  Actualiza la polÃ­tica de CORS de tu bucket S3 para permitir peticiones desde tu nueva URL de Netlify.

---
## ğŸ”— Link Despliegue

Puedes acceder a la versiÃ³n en producciÃ³n aquÃ­:
**[https://vocal-peony-3f0286.netlify.app/](https://vocal-peony-3f0286.netlify.app/)**

# âœ’ï¸ Autores

*   Abrahan Taborda
*   Jeronimo Rodriguez
*   Emmanuel Jaramillo
*   Luis Ducuara
*   Diego Zuluaga

*coders Van-rossum*

# Â¡Gracias por revisar este proyecto!
